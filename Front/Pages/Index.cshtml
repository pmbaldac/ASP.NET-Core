@page
@model Front.Pages.IndexModel

<h2>Auditoria</h2>

<form method="get">
    <div class="form-group">
        <label for="EstadoFiltro">Estado:</label>
        <select id="EstadoFiltro" name="EstadoFiltro" class="form-control">
            <option value="">-- Todos --</option>
            @foreach (var est in Model.lEstados)
            {
            <option value="@est.estado" selected="@(Model.EstadoFiltro == est.estado)">
                @est.estado
            </option>
            }
        </select>
    </div>

    <div class="form-group">
        <label for="FechaInicio">Fecha inicio:</label>
        <input type="date" id="FechaInicio" name="FechaInicio" value="@(Model.FechaInicio?.ToString(" yyyy-MM-dd"))" class="form-control" />
    </div>

    <div class="form-group">
        <label for="FechaFin">Fecha fin:</label>
        <input type="date" id="FechaFin" name="FechaFin" value="@(Model.FechaFin?.ToString(" yyyy-MM-dd"))" class="form-control" />
    </div>

    <button type="submit" class="btn btn-primary">Filtrar</button>
</form>

<table class="table table-striped mt-3">
    <thead>
        <tr>
            <th>Título</th>
            <th>Responsable</th>
            <th>Área</th>
            <th>Fecha Inicio</th>
            <th>Fecha Fin</th>
            <th>Estado</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.lAuditorias)
        {
        <tr>
            <td>@item.titulo</td>
            <td>@item.responsable</td>
            <td>@item.area</td>
            <td>@item.fechainicio.ToString("yyyy-MM-dd")</td>
            <td>@(item.fechafin.HasValue ? item.fechafin.Value.ToString("yyyy-MM-dd") : "En curso")</td>
            <td>@item.estado</td>
        </tr>
        }
    </tbody>
</table>
